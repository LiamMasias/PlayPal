<%- include ('../partials/head') %>
<%- include ('../partials/menu') %>

<main>
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1>My Reviews</h1> 
      <a href="/addReview" class="btn btn-primary">New Review</a>
    </div>
    <% if (reviews.length > 0) { %>
      <% reviews.forEach(review => { %>
        <div class="card mb-3">
          <!-- Game cover on left and game information on right -->
          <div class="row g-0">
            <div class="col-md-1">
              <img src="<%= review.gameCoverImageUrl %>" class="img-fluid rounded-start" alt="<%= review.gameName %>" style="width: 120px">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title"><%= review.gameName %></h5>
                <p class="card-text">Rating: <%= review.rating %>/5</p>
                <p class="card-text">Description: <%= review.reviewtext %></p>
                <p class="card-text"><small class="text-muted">Created at: <%= review.timecreated %></small></p>
                
                <!-- Delete Review Button-->
                <form action="/deleteReview" method="post">
                  <input type="hidden" name="reviewId" value="<%= review.reviewid %>">
                  <button type="submit" class="btn btn-danger">Delete Review</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      <% }); %>
    <% } else { %>
      <p>You currently have no reviews.</p>
    <% } %>
  </div>
</main>

<%- include ('../partials/footer') %>
